# -----------------------------------
# ------- General Settings ----------
# -----------------------------------
# Terminal settings
set-option -g default-terminal "xterm-256color"
set-option -as terminal-overrides ",xterm-256color:Tc"

# History and exit behavior
set -g history-limit 1000000
set -g remain-on-exit off

# Path settings
tmux_conf_new_window_retain_current_path=true
tmux_conf_new_pane_retain_current_path=true
tmux_conf_new_pane_reconnect_ssh=false
tmux_conf_new_session_prompt=false

# Change prefix key to C-a
unbind C-b
set -g prefix C-a

# Window title settings
set -g set-titles on
set -g set-titles-string "#I:#W"

# Start indexing from 1
set -g base-index 1
setw -g pane-base-index 1

# Enable mouse support
set -g mouse on

# Vi mode
set -g status-keys vi
set -g mode-keys vi
set-window-option -g mode-keys vi
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# pbcopy is Mac-specific
unbind-key -T copy-mode-vi v
bind-key -T copy-mode-vi v send-keys -X begin-selection
bind-key -T copy-mode-vi C-v send-keys -X rectangle-toggle \; send -X begin-selection "pbcopy"
# bind-key -T copy-mode-vi y send-keys -X copy-pipe "pbcopy" \; send-keys -X cancel
bind-key -T copy-mode-vi y send-keys -X copy-pipe "pbcopy"
bind-key -T copy-mode-vi i send-keys -X cancel

# Status bar
set-option -g status-right ""

# -----------------------------------
# -------- style settings -----------
# -----------------------------------
# set -g status-style bg=colour22,fg=colour156
# set -g window-status-current-style bg=colour10,fg=colour0,bold
# set -g window-status-style bg=colour22,fg=colour255

# -----------------------------------
# -------- command keys -------------
# -----------------------------------
set -s extended-keys on
set -g allow-passthrough on
set -as terminal-features 'xterm*:extkeys'
set -s extended-keys always

# -----------------------------------
# ------- Clipboard Settings --------
# -----------------------------------
tmux_conf_copy_to_os_clipboard=true
set -s set-clipboard on
set -as terminal-overrides ',xterm-256color:Ms=\E]52;%p1%s;%p2%s\007'

# -----------------------------------
# --------- Vscode Settings ---------
# -----------------------------------
# update VSCODE variables from integrated terminal so that `code` command opens in current window
set-option -ga update-environment ' VSCODE_GIT_ASKPASS_NODE VSCODE_GIT_ASKPASS_MAIN VSCODE_IPC_HOOK_CLI PATH GIT_ASKPASS'

# -----------------------------------
# -------- Window Settings ----------
# -----------------------------------
bind e select-layout even-horizontal
bind p command-prompt -p "move to window:" "join-pane -t ':%%'"

# -----------------------------------
# ---------- TPM Settings -----------
# -----------------------------------
set -g @plugin 'tmux-plugins/tpm'

set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @resurrect-dir '/data/misc/.tmux/resurrect'

set -g @plugin '2kabhishek/tmux2k'
set -g @tmux2k-time-icon ' '
set -g @tmux2k-icons-only false
set -g @tmux2k-show-powerline true
set -g window-status-format '#I:#W#{?window_zoomed_flag,#[fg=green]Z#[default],}'
set -g @tmux2k-window-list-format '#{?window_zoomed_flag,#[fg=black]Z ,}#I:#W'
set -g @tmux2k-right-plugins "time"
set -g @tmux2k-theme 'duo'
set -g @tmux2k-prefix-highlight '#88c800'
set -g @tmux2k-duo-fg "#4efb7a" # this will get you duo blue shown above
set -g @tmux2k-duo-bg "#1e1e29" # this will set the bg for duo theme
# set -g @tmux2k-bg-main "#005f00"
# set -g @tmux2k-bg-alt "#005f00"
# set -g @tmux2k-blue "#00d880"
# set -g @tmux2k-light-blue "#00d880"
# set -g @tmux2k-light-green "#030303"
# set -g @tmux2k-red "#ffffff"
# set -g @tmux2k-green "#beff3a"
# set -g @tmux2k-light-yellow "#16c870" # this will get you duo blue shown above
# set -g @tmux2k-gray "#16c870" # this will get you duo blue shown above
# set -g @tmux2k-cyan "#16c870" # this will get you duo blue shown above

# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
run '~/.tmux/plugins/tpm/tpm'
setw -g pane-active-border-style fg=colour46
setw -g pane-border-style fg=colour240

